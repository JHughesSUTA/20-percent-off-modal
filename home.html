<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>20 percent off - modal</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@700&family=Prata&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <button class="button open-button">open popup</button>

    <dialog class="popup" id="form-popup">
      <button class="close-button" id="form-close-button">&#x2715;</button>
      <span class="form-popup__bar form-popup__bar--top"></span>
      <div class="form-popup__container">
        <div class="form-popup__info">
          <div class="form-popup__info__tag">
            <p>Get Your Style On</p>
          </div>
          <div class="form-popup__info__divider">
            <div class="form-popup__info__divider__line"></div>
            <p class="form-popup__info__divider__text">&</p>
            <div class="form-popup__info__divider__line"></div>
          </div>
          <p class="form-popup__info__deal">
            <span class="form-popup__info__deal__text-twenty">20</span>
            <span class="form-popup__info__deal__text-percent">%</span>
            <span class="form-popup__info__deal__text-off">OFF</span>
          </p>
        </div>
        <form
          class="form-popup__form"
          onsubmit="event.preventDefault(); handleSubmit();"
          action=""
        >
          <div class="form-control">
            <input
              type="email"
              id="form-popup__form__email"
              name="email"
              placeholder="Email Address"
            />
          </div>
          <div class="form-control">
            <input
              type="submit"
              id="form-popup__form__sign-up"
              value="Sign Up"
            />
          </div>
        </form>
      </div>
      <span class="form-popup__bar form-popup__bar--bottom"></span>
    </dialog>

    <dialog class="popup confirm-popup" id="confirm-popup">
      <button class="close-button" id="confirm-close-button">&#x2715;</button>
      <div class="confirm-popup__container">
        <h1 class="confirm-popup__heading">Just Like Old Friends</h1>
        <div class="confirm-popup__divider">
          <span class="dot-small"></span>
          <span class="confirm-popup__divider__line"></span>
          <span class="dot-small"></span>
          <span class="dot-large"></span>
          <span class="dot-small"></span>
        </div>
        <p class="confirm-popup__statement">
          We'll keep you updated on any deals, news, or gossip that comes our
          way!
        </p>
        <a class="confirm-popup__link" href="#">Go Shop!</a>
      </div>
    </dialog>
  </body>
</html>

<script>
  const formPopup = document.querySelector("#form-popup");
  const confirmPopup = document.querySelector("#confirm-popup");
  const openPopup = document.querySelector(".open-button");
  const closeFormPopup = document.querySelector("#form-close-button");
  const closeConfirmPopup = document.querySelector("#confirm-close-button");
  const confirmPopupLink = document.querySelector(".confirm-popup__link");
  const signUpButton = document.getElementById("form-popup__form__email");

  formPopup.showModal();

  openPopup.addEventListener("click", () => {
    signUpButton.value = "";
    formPopup.showModal();
  });

  closeFormPopup.addEventListener("click", () => {
    formPopup.close();
  });

  closeConfirmPopup.addEventListener("click", () => {
    confirmPopup.close();
  });

  confirmPopupLink.addEventListener("click", () => {
    confirmPopup.close();
  });

  const handleSubmit = () => {
    if (signUpButton.value === '') {
      alert("please enter your email");
      return
    }

    formPopup.close();
    confirmPopup.showModal();
  };
</script>
